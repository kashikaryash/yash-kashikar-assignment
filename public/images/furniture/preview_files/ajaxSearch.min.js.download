!function(_){woodmartThemeModule.$document.on("wdShopPageInit",function(){woodmartThemeModule.ajaxSearch()}),_.each(["frontend/element_ready/wd_search.default"],function(e,a){woodmartThemeModule.wdElementorAddAction(a,function(){woodmartThemeModule.ajaxSearch()})}),woodmartThemeModule.ajaxSearch=function(){void 0!==_.fn.devbridgeAutocomplete&&(_("form.woodmart-ajax-search").each(function(){var d=_(this),n=parseInt(d.data("count")),s=parseInt(d.data("thumbnail")),o=parseInt(d.data("symbols_count")),r=d.find('[name="product_cat"]'),e=d.parent(),l=d.data("post_type"),c=woodmart_settings.ajaxurl+"?action=woodmart_ajax_search",i=parseInt(d.data("price")),u=d.data("sku"),h=d.parents(".wd-search-full-screen").length,w=d.parents(".wd-search-full-screen-2").length,p=d.parents(".wd-search-dropdown").length,m=e.find(`.wd-search-results${h||w?"":" > "}.wd-scroll-content`),f=e.find(".wd-search-results"),g=d.data("include_cat_search");function v(e){0!==d.parents(".wd-search-form.wd-display-form.wd-with-overlay").length&&_(".wd-close-side").trigger("wdCloseSideAction",["open"===e?"show":"hide","click"])}0<n&&(c+="&number="+n),c+="&post_type="+l,r.length&&""!==r.val()&&(c+="&product_cat="+r.val()),g&&"yes"===g&&(c+="&include_cat_search="+g),d.find('[type="text"]').on("focus keyup cat_selected",function(e){var a=_(this),t={action:"woodmart_ajax_search",number:0<n?n:void 0,post_type:l};if(a.hasClass("wd-search-inited")||(a.devbridgeAutocomplete({serviceUrl:c,appendTo:m,minChars:o,deferRequestBy:woodmart_settings.ajax_search_delay,onHide:function(){w&&f.removeClass("wd-no-results"),void 0===woodmartThemeModule.beforeSearchcontent&&(v("close"),f.removeClass("wd-opened")),(w?d.parent():d).parent().removeClass("wd-searched")},onSearchStart:function(){d.addClass("wd-search-loading")},beforeRender:function(e){p||v("open"),_(e).find(".wd-not-found-msg").parent().addClass("wd-not-found");var a=0<_(e).find(".wd-suggestion:not(.wd-not-found)").length;(a=_(e).find('[class*="wd-type-"]')?a:2<e[0].childElementCount)&&(a=d.serializeArray(),a=d.attr("action")+"?"+_.param(a),_(e).append('<a class="wd-all-results" href="'+a+'">'+woodmart_settings.all_results+"</a>")),_(e).removeAttr("style")},onSelect:function(){d.parent().find(".wd-search-results").removeClass("wd-opened")},onSearchComplete:function(){d.removeClass("wd-search-loading"),woodmartThemeModule.$document.trigger("wood-images-loaded")},formatResult:function(e,a){var a="("+(a="&"===a?"&#038;":a).replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")+")",t="";return e.divider&&(t+=' <div class="suggestion-divider-title title">'+e.divider+"</div>"),s&&e.thumbnail&&(t+=' <div class="wd-suggestion-thumb">'+e.thumbnail+"</div>"),e.value&&(t=(t+=' <div class="wd-suggestion-content wd-set-mb reset-last-child">')+'<div class="wd-entities-title">'+e.value.replace(new RegExp(a,"gi"),"<strong>$1</strong>").replace(/&lt;(\/?strong)&gt;/g,"<$1>")+"</div>"),u&&e.sku&&(t+=' <p class="wd-suggestion-sku">'+e.sku+"</p>"),i&&e.price&&(t+=' <p class="price">'+e.price+"</p>"),e.value&&(t+=" </div>"),e.permalink&&(a="",e.value&&(a=`aria-label="${e.value}"`),t+=` <a class="wd-fill" href="${e.permalink}" ${a}></a>`),e.products_not_found&&(t='<span class="wd-not-found-msg">'+e.value+"</span>"),w&&(e.no_results?f.addClass("wd-no-results"):f.removeClass("wd-no-results")),h||w||f.addClass("wd-opened"),(w?d.parent():d).parent().addClass("wd-searched"),t}}),a.addClass("wd-search-inited")),r.length&&"cat_selected"===e.type){""!==r.val()&&(t.product_cat=r.val());a=d.find('[type="text"]').devbridgeAutocomplete();let e=woodmart_settings.ajaxurl+"?"+new URLSearchParams(t).toString();g&&"yes"===g&&(e+="&include_cat_search="+g),a.setOptions({serviceUrl:e}),a.hide(),a.onValueChange()}}),woodmartThemeModule.$document.on("click",function(e){e=e.target;_(e).is(".wd-search-form")||_(e).parents().is(".wd-search-form")||_(e).is(".wd-search-full-screen")||_(e).parents().is(".wd-search-full-screen")||d.find('[type="text"]').devbridgeAutocomplete("hide")}),_(".wd-search-results > .wd-scroll-content").on("click",function(e){e.stopPropagation()})}),_(".wd-header-search.wd-display-dropdown > a").on("click",function(e){e.preventDefault()}))},_(document).ready(function(){woodmartThemeModule.ajaxSearch()}),window.addEventListener("wdUpdatedHeader",function(){woodmartThemeModule.ajaxSearch()})}(jQuery);